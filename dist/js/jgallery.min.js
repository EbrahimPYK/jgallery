/*!
* jgallery v2.0.0
* http://jgallery.jakubkowalczyk.pl/
*
* Released under the MIT license
*
* Date: 2015-07-27
*/
!function(a){"use strict";a.module("jgallery",[]),a.module("jgallery").factory("jgallery.defaults",function(){return{autostart:!0,autostartAtImage:1,autostartAtAlbum:1,backgroundColor:"#fff",backgroundColorAlternative:"#ddd",browserHistory:!0,canChangeMode:!0,canClose:!1,canMinimalizeThumbnails:!0,canZoom:!0,disabledOnIE8AndOlder:!0,draggableZoom:!0,draggableZoomHideNavigationOnMobile:!0,height:"100vh",hideThumbnailsOnInit:!1,maxMobileWidth:767,mode:"standard",preloadAll:!1,slideshow:!0,slideshowAutostart:!1,slideshowCanRandom:!0,slideshowInterval:"8s",slideshowRandom:!1,swipeEvents:!0,textColor:"#000",thumbnails:!0,thumbHeight:75,thumbHeightOnFullScreen:100,thumbnailsFullScreen:!0,thumbnailsHideOnMobile:!0,thumbnailsPosition:"bottom",thumbType:"images",thumbWidth:75,thumbWidthOnFullScreen:100,title:!0,titleExpanded:!1,tooltipClose:"Close",tooltipFullScreen:"Full screen",tooltipRandom:"Random",tooltips:!0,tooltipSeeAllPhotos:"See all photos",tooltipSeeOtherAlbums:"See other albums",tooltipSlideshow:"Slideshow",tooltipToggleThumbnails:"Toggle thumbnails",tooltipZoom:"Zoom",transition:"moveToLeft_moveFromRight",transitionBackward:"auto",transitionCols:1,transitionDuration:"0.7s",transitionRows:1,transitionTimingFunction:"cubic-bezier(0,1,1,1)",transitionWaveDirection:"forward",width:"100%",zoomSize:"fit",afterLoadPhoto:function(){},beforeLoadPhoto:function(){},closeGallery:function(){},initGallery:function(){},showGallery:function(){},showPhoto:function(){}}}),a.module("jgallery").factory("jgallery.defaultsFullScreenMode",function(){return{}}),a.module("jgallery").factory("jgallery.defaultsSliderMode",function(){return{width:"940px",height:"360px",canZoom:!1,draggableZoom:!1,browserHistory:!1,thumbnailsFullScreen:!1,thumbType:"square",thumbWidth:20,thumbHeight:20,canMinimalizeThumbnails:!1,transition:"rotateCubeRightOut_rotateCubeRightIn",transitionBackward:"rotateCubeRightOut_rotateCubeRightIn",transitionCols:6,transitionRows:1,slideshow:!0,slideshowAutostart:!0,zoomSize:"fill"}}),a.module("jgallery").factory("jgallery.requiredFullScreenMode",function(){return{}}),a.module("jgallery").factory("jgallery.requiredSliderMode",function(){return{autostart:!0,canClose:!1,zoomSize:"fill",canChangeMode:!1}}),a.module("jgallery").run(["$templateCache",function(a){a.put("../../templates/animation.html",'<div class=jgallery-animation-container><div ng-repeat="row in [rows] | jgalleryRange" class=row><div ng-repeat="col in [cols] | jgalleryRange" class=item><div ng-transclude style="transform: translate({{-100*(col+1-(1+parseInt(cols))/2)}}%, {{-100*(row+1-(1+parseInt(rows))/2)}}%)"></div></div></div></div>'),a.put("../../templates/draggable-nav.html","<div class=zoom-nav ng-class=\"{hide: ! draggableNavIsVisible && ! draggingInProgress}\"><img jgallery-draggable-img ng-src=\"{{ gallery.activeAlbum.activePhoto.href }}\" class=bg><div jgallery-draggable-nav-crop class=crop ng-style=\"{\n        width: preview.clientWidth / img.width * nav.width  + 'px',\n        height: preview.clientHeight / img.height * nav.height  + 'px',\n        'margin-left': - parseInt( img.style.marginLeft ) / img.width * nav.width + 'px',\n        'margin-top': - img.height / img.height * parseInt( img.style.marginTop ) / img.height * nav.height + 'px',\n        'border-color': options.backgroundColor\n    }\"><img ng-src=\"{{ gallery.activeAlbum.activePhoto.href }}\" ng-style=\"{\n            'margin-left': parseInt( img.style.marginLeft ) / img.width * nav.width + 'px',\n            'margin-top': img.height / img.height * parseInt( img.style.marginTop ) / img.height * nav.height + 'px',\n        }\"></div></div>"),a.put("../../templates/jgallery.html",'<div ng-transclude ng-hide="options.mode !== \'full-screen\' && gallery.isVisible"></div><div class="jgallery jgallery-{{ options.mode }}" data-jgallery-id="{{ gallery.id }}" ng-show=gallery.isVisible ng-style="{\n        background: options.backgroundColor,\n        color: options.textColor,\n'+"        'text-shadow': '0 0 1px ' + options.backgroundColor,\n        width: options.mode != 'full-screen' ? options.width : 'inherit',\n        height: options.mode != 'full-screen' ? options.height : 'inherit'\n     }\"><div jgallery-thumbnails ng-hide=\"thumbnailsIsHidden && ! thumbnailsIsFullScreen\" class=\"jgallery-thumbnails jgallery-thumbnails-{{ options.thumbnailsPosition }} {{ options.thumbType }}\" style=\"{{ thumbnailsIsVertical ? 'width: ' + thumbWidth : 'height: ' + thumbHeight }}px; background: {{ options.backgroundColor }}\" ng-class=\"{'full-screen': thumbnailsIsFullScreen}\"></div><div data-jgallery-preview></div></div>"),a.put("../../templates/preview.html","<div class=zoom-container ng-style=\"{\n        'left': ! isSlider && ! thumbnailsIsHidden && options.thumbnailsPosition === 'left' ? thumbnails.clientWidth + 'px' : 0,\n        'right': ! isSlider && ! thumbnailsIsHidden && options.thumbnailsPosition == 'right' ? thumbnails.clientWidth + 'px' : 0,\n        'top': ! isSlider && ! thumbnailsIsHidden && options.thumbnailsPosition == 'top' ? thumbnails.clientHeight + 'px' : 0,\n        'bottom': ! isSlider && ! thumbnailsIsHidden && options.thumbnailsPosition == 'bottom' ? 40 + thumbnails.clientHeight + 'px' : '40px',\n        'background': options.backgroundColorAlternative\n"+'    }"><div class="zoom before pt-perspective" jgallery-draggable-container><jgallery-animation rows="{{ options.transitionRows }}" cols="{{ options.transitionCols }}"><img ng-src="{{ gallery.activeAlbum.activePhoto.href }}" ng-style=gallery.activeAlbum.activePhoto.style jgallery-draggable-element="{{ canDrag }}" jgallery-draggable-element-on-start=startDragCallback() jgallery-draggable-element-on-stop=stopDragCallback() jgallery-mousedown-prevent-default></jgallery-animation><div jgallery-draggable-nav></div></div><span class="fa fa-chevron-left prev jgallery-btn jgallery-btn-large" ng-class="{hidden: ! gallery.activeAlbum.hasPrevPhoto}" ng-click=goToPrevPhoto() ng-style="{\n                \'background\': options.backgroundColor\n          }"></span> <span class="fa fa-chevron-right next jgallery-btn jgallery-btn-large" ng-class="{hidden: ! gallery.activeAlbum.hasNextPhoto}" ng-click=goToNextPhoto() ng-style="{\n                \'background\': options.backgroundColor\n          }"></span> <span class=progress></span><div class=nav ng-style="{\n            \'background\': options.backgroundColor\n        }"><span jgallery-btn class="fa resize fa-search jgallery-btn jgallery-btn-small" data-tooltip-position="bottom right" data-tooltip="{{ options.tooltipZoom }}" ng-class="{\n                \'fa-search-plus\': canZoomIn,\n                \'fa-search-minus\': canZoomOut\n              }" ng-click=changeZoomSize()></span> <span jgallery-btn class="fa change-mode jgallery-btn jgallery-btn-small" data-tooltip-position="bottom right" data-tooltip="{{ options.tooltipFullScreen }}" ng-show=options.canChangeMode ng-click="options.mode = options.mode == \'standard\' ? \'full-screen\' : \'standard\'" ng-class="{\'fa-expand\': options.mode == \'standard\', \'fa-compress\': options.mode != \'standard\'}"></span> <span jgallery-btn class="fa fa-times jgallery-close jgallery-btn jgallery-btn-small" data-tooltip-position="bottom right" data-tooltip="{{ options.tooltipClose }}" ng-show=options.canClose ng-click="gallery.isVisible = false"></span></div><div class=nav-bottom style="background: {{ options.backgroundColor }}; box-shadow: 0 0 5px rgba( 0, 0, 0, .3 )" ng-hide=thumbnailsIsFullScreen><div class=icons><span jgallery-btn class="fa fa-th full-screen jgallery-btn jgallery-btn-small" data-tooltip="{{ options.tooltipSeeAllPhotos }}" ng-click="thumbnailsIsFullScreen = ! thumbnailsIsFullScreen"></span> <span jgallery-btn class="fa minimalize-thumbnails jgallery-btn jgallery-btn-small" data-tooltip="{{ options.tooltipToggleThumbnails }}" ng-class="{\'fa-ellipsis-h\': !thumbnailsIsVertical, \'fa-ellipsis-v\': thumbnailsIsVertical, inactive: thumbnailsIsHidden}" ng-click="thumbnailsIsHidden = ! thumbnailsIsHidden;"></span> <span jgallery-btn class="fa fa-list-ul change-album jgallery-btn jgallery-btn-small" ng-class="{inactive: ! hasManyAlbums, active: albumsDropdownIsVisible}" ng-click="albumsDropdownIsVisible = ! albumsDropdownIsVisible" tooltip="{{ options.tooltipSeeOtherAlbums }}"><span class="menu jgallery-btn" style="background: {{ options.backgroundColor }}; box-shadow: 0 0 20px {{ options.color }}"><span class=item ng-repeat="album in gallery.albums" ng-click="gallery.setAlbumAsActive( album.id )">{{ album.title }}</span></span> <span class=title>{{ gallery.activeAlbum.title }}</span></span></div><div class="title before"></div></div></div>'),a.put("../../templates/scrollable.html",'<div ng-transclude></div><span class="jgallery-scroll-top jgallery-btn" ng-class="{\'visible\': canScrollTop()}" ng-click=scrollTop();><span class="fa fa-chevron-up ico"></span></span> <span class="jgallery-scroll-bottom jgallery-btn" ng-class="{\'visible\': canScrollBottom()}" ng-click=scrollBottom();><span class="fa fa-chevron-down ico"></span></span> <span class="jgallery-scroll-left jgallery-btn" ng-class="{\'visible\': canScrollLeft()}" ng-click=scrollLeft();><span class="fa fa-chevron-left ico"></span></span> <span class="jgallery-scroll-right jgallery-btn" ng-class="{\'visible\': canScrollRight()}" ng-click=scrollRight();><span class="fa fa-chevron-right ico"></span></span>'),a.put("../../templates/thumbnails.html",'<div jgallery-scrollable><div ng-repeat="album in gallery.albums" class=album ng-class="{\'active\': album.id == gallery.activeAlbum.id}" style="{{ thumbnailsIsVertical ? \'\' : \'width: \' + album.photos.length * thumbWidth + \'px\' }}"><a ng-repeat="photo in album.photos" ng-click="$event.preventDefault(); $parent.$parent.$parent.$parent.gallery.showPhoto( photo ); $parent.$parent.$parent.$parent.thumbnailsIsFullScreen = false;" ng-href="{{ isSlider ? photo.src : photo.href }}" ng-attr-link="{{ isSlider ? photo.href : undefined }}" ng-attr-target="{{ isSlider ? photo.target : undefined }}" style="width: {{ thumbWidth }}px; height: {{ thumbHeight }}px; font-size: {{ thumbHeight }}px"><img ng-src="{{ photo.src }}" ng-attr-alt="{{ photo.title }}" ng-attr-data-jgallery-bg-color="{{ photo.bgColor }}" ng-attr-data-jgallery-text-color="{{ photo.textColor }}" ng-class="{\n                     \'thumb-vertical\': photo.thumbWidth / photo.thumbHeight < options.thumbWidth / options.thumbHeight,\n                     \'thumb-horizontal\': photo.thumbWidth / photo.thumbHeight >= options.thumbWidth / options.thumbHeight,\n                     \'thumb-on-full-screen-vertical\': photo.thumbWidth / photo.thumbHeight < options.thumbWidthOnFullScreen / options.thumbHeightOnFullScreen,\n                     \'thumb-on-full-screen-horizontal\': photo.thumbWidth / photo.thumbHeight >= options.thumbWidthOnFullScreen / options.thumbHeightOnFullScreen\n                 }"></a></div></div>')}]),a.module("jgallery").filter("jgalleryRange",function(){return function(a){var b,c;switch(a.length){case 1:b=0,c=parseInt(a[0])-1;break;case 2:b=parseInt(a[0]),c=parseInt(a[1]);break;default:return a}for(var d=[],e=b;c>=e;e++)d.push(e);return d}}),a.module("jgallery").factory("jgallery.album",function(){var b=1,c=function(){this.id=b++,this.title,this.photos=[],this.activePhoto,this.hasPrevPhoto=!1,this.hasNextPhoto=!1};return c.prototype={constructor:c,addPhoto:function(a){this.photos.push(a),this.checkNextAndPrevPhotos()},setActivePhoto:function(a){this.activePhoto=a,this.checkNextAndPrevPhotos()},checkNextAndPrevPhotos:function(){var b=this;a.forEach(this.photos,function(a,c){b.activePhoto&&a.id===b.activePhoto.id&&(b.hasPrevPhoto=c>0,b.hasNextPhoto=c<b.photos.length-1)})}},c}),a.module("jgallery").factory("jgallery.gallery",["$filter","jgallery.defaults","jgallery.defaultsFullScreenMode","jgallery.requiredFullScreenMode","jgallery.defaultsSliderMode","jgallery.requiredSliderMode",function(b,c,d,e,f,g){var h=1,i=function(){this.id=h++,this.isVisible=!1,this.albums=[],this.activeAlbum,this.options={}};return i.prototype={constructor:i,addAlbum:function(a){a.title||(a.title="Album "+a.id),this.albums.push(a)},setAlbumAsActive:function(a){this.activeAlbum=b("filter")(this.albums,{id:a})[0],this.showPhoto(this.activeAlbum.photos[0])},showPhoto:function(a){this.activeAlbum.setActivePhoto(a),this.isVisible=!0},setOptions:function(b){this.options=a.copy(c),"full-screen"===b.mode?a.extend(this.options,d,b,e):"slider"===b.mode?a.extend(this.options,f,b,g):a.extend(this.options,b)}},i}]),a.module("jgallery").factory("jgallery.photo",function(){var a=1,b=function(){this.id=a++,this.href="",this.target="",this.src="",this.bgColor="",this.textColor="",this.element="",this.width=0,this.height=0,this.thumb="",this.thumbWidth=0,this.thumbHeight=0,this.thumbIsVertical=!1};return b.prototype={constructor:b,setSize:function(a,b){this.width=a,this.height=b,this.isVertical=this.width<this.height},setThumbSize:function(a,b){this.thumbWidth=a,this.thumbHeight=b,this.thumbIsVertical=this.thumbWidth<this.thumbHeight}},b}),a.module("jgallery").directive("jgalleryAlbum",["jgallery.album",function(a){return{scope:{},require:"^jgallery",link:function(a,b,c,d){a.album.title=c.jgalleryAlbum,d.addAlbum(a.album)},controller:["$scope",function(b){b.album=new a,this.addPhoto=function(a){b.$parent.$apply(function(){b.album.addPhoto(a)})}}]}}]),a.module("jgallery").directive("jgalleryAnimation",["$timeout",function(a){return{scope:{cols:"@",rows:"@"},transclude:!0,templateUrl:"../../templates/animation.html",link:function(a){a.parseInt=parseInt}}}]),a.module("jgallery").directive("jgalleryDraggableContainer",function(){var a=function(a,b){var c=Math.max(a.left-b.left,0);return c?-c:Math.max(-a.left-a.width+b.left+b.width,0)},b=function(a,b){var c=Math.max(a.top-b.top,0);return c?-c:Math.max(-a.top-a.height+b.top+b.height,0)};return{controller:["$scope","$element",function(c,d){c.$on("jgallery:draggableElement:move",function(a,b){c.$broadcast("jgallery:draggableContainer:change",b)}),this.pullEdge=function(e){var f=e[0].getBoundingClientRect(),g=d[0].getBoundingClientRect();e.css({"margin-top":g.height<f.height?parseInt(e.css("margin-top"))+b(f,g)+"px":"0","margin-left":g.width<f.width?parseInt(e.css("margin-left"))+a(f,g)+"px":"0"}),c.$broadcast("jgallery:draggableContainer:change",e)}}]}}),a.module("jgallery").directive("jgalleryDraggableElement",function(){return{require:"?^jgalleryDraggableContainer",scope:{start:"&jgalleryDraggableElementOnStart",stop:"&jgalleryDraggableElementOnStop"},link:function(b,c,d,e){var f,g,h,i,j=a.element(c),k=function(a){f=a.pageX,g=a.pageY,h=parseInt(j.css("margin-left")),i=parseInt(j.css("margin-top")),j.bind("mousemove",l).bind("mouseup mouseleave",m),b.start()},l=function(a){j.css({"margin-left":h+a.pageX-f+"px","margin-top":i+a.pageY-g+"px"}),b.$emit("jgallery:draggableElement:move",j)},m=function(){e&&e.pullEdge(j),j.unbind("mousemove",l).unbind("mouseup mouseleave",m),b.stop()};d.$observe("jgalleryDraggableElement",function(a){"true"===a?j.bind("mousedown",k):j.unbind("mousedown",k)})}}}),a.module("jgallery").directive("jgalleryDraggableImg",["$timeout",function(a){return{require:"^jgalleryDraggableContainer",link:function(a,b,c,d){a.nav=b[0]}}}]),a.module("jgallery").directive("jgalleryDraggableNav",["$timeout",function(a){return{require:"^jgalleryDraggableContainer",scope:!0,controller:["$scope","$element",function(b,c){b.$watch("options.mode",function(){a(function(){b.$apply()})}),b.$on("jgallery:draggableContainer:change",function(a,c){b.img=c[0],b.$apply()})}],templateUrl:"../../templates/draggable-nav.html"}}]),a.module("jgallery").directive("jgallery",["$timeout","$document","$window","jgallery.gallery",function(b,c,d,e){return{transclude:!0,scope:!0,link:function(b,e,f){var g=function(){return b.gallery.activeAlbum.activePhoto&&b.gallery.activeAlbum.activePhoto.id};b.goToPrevPhoto=function(){var c;a.forEach(b.gallery.activeAlbum.photos,function(a,d){a.id===b.gallery.activeAlbum.activePhoto.id&&b.gallery.activeAlbum.photos[d-1]&&(c=d-1)}),a.isDefined(c)&&b.gallery.showPhoto(b.gallery.activeAlbum.photos[c])},b.goToNextPhoto=function(){var c;a.forEach(b.gallery.activeAlbum.photos,function(a,d){a.id===b.gallery.activeAlbum.activePhoto.id&&b.gallery.activeAlbum.photos[d+1]&&(c=d+1)}),c&&b.gallery.showPhoto(b.gallery.activeAlbum.photos[c])},a.element(e).attr("data-jgallery-id",b.gallery.id),b.gallery.setOptions(a.fromJson(f.jgallery)),b.options=b.gallery.options,b.gallery.options.autostart&&(b.gallery.isVisible=!0),b.$watch("albums",function(a){b.hasManyAlbums=a.length>1}),b.$watch("options.autostartAtAlbum + albums",function(){b.gallery.activeAlbum||(b.gallery.activeAlbum=b.gallery.albums[b.options.autostartAtAlbum-1])}),b.$watch("options.autostartAtImage + gallery.activeAlbum.photos",function(){!g()&&b.gallery.activeAlbum.photos[b.options.autostartAtImage-1]&&b.gallery.showPhoto(b.gallery.activeAlbum.photos[b.options.autostartAtImage-1])}),b.$watch("options.mode",function(a){b.isSlider="slider"===a}),a.element(d).bind("resize",function(){b.$apply()}),a.element(c.find("head")).append('<style type="text/css" class="colours" data-jgallery-id="'+b.gallery.id+'"></style>')},controller:["$scope",function(a){a.gallery=new e,a.albums=a.gallery.albums,this.addAlbum=function(b){a.gallery.addAlbum(b)},this.showPhoto=function(c){a.gallery.showPhoto(c),b(function(){a.$apply()})}}],templateUrl:"../../templates/jgallery.html"}}]),a.module("jgallery").directive("jgalleryMousedownPreventDefault",function(){return{link:function(b,c){var d=a.element(c);d.bind("mousedown",function(a){a.preventDefault()})}}}),a.module("jgallery").directive("jgalleryPhoto",["jgallery.photo",function(b){return{require:["^jgalleryAlbum","^jgallery"],link:function(c,d,e,f){var g,h=new b,i=f[0],j=f[1];d.attr("href")?(g=a.element(d).find("img"),h.href=d.attr("href"),h.target=d.attr("target")):d.attr("src")&&(g=d),h.src=g.attr("src"),h.title=g.attr("alt"),h.bgColor=g.attr("data-jgallery-bg-color"),h.textColor=g.attr("data-jgallery-text-color"),function(){var a=new Image,b=new Image;a.onload=function(){h.thumb=a,h.setThumbSize(a.width,a.height),i.addPhoto(h),b.onload=function(){h.element=b,h.setSize(b.width,b.height),c.$apply()},b.src=h.href},a.src=h.src}(),a.element(d).bind("click",function(a){a.preventDefault(),j.showPhoto(h)})}}}]),a.module("jgallery").directive("jgalleryPreview",["$timeout",function(b){return{require:"^jgallery",link:function(c,d,e){var f=c.options,g=c.preview=d[0].childNodes[0];c.parseInt=parseInt,c.changeZoomSize=function(){var a=c.gallery.activeAlbum.activePhoto;"fit"===f.zoomSize?f.zoomSize="fill":"fill"===f.zoomSize?g.clientWidth===a.width||g.clientHeight===a.height?f.zoomSize="fit":f.zoomSize="original":f.zoomSize="fit"},c.startDragCallback=function(){c.draggingInProgress=!0,c.$apply()},c.stopDragCallback=function(){c.draggingInProgress=!1,c.$apply()},c.$watchGroup(["options.zoomSize","gallery.activeAlbum.activePhoto.width","gallery.activeAlbum.activePhoto.height","preview.clientWidth","preview.clientHeight"],function(){var a=c.options.zoomSize,b=c.gallery.activeAlbum.activePhoto;b&&("fill"===a?(g.clientWidth<b.width&&g.clientHeight<b.height?(c.canZoomIn=!0,c.canZoomOut=!1,c.draggableNavIsVisible=!1):(c.canZoomIn=!1,c.canZoomOut=!0,c.draggableNavIsVisible=!1),c.canDrag=!0):"original"===a&&(g.clientWidth<b.width||g.clientHeight<b.height)?(c.canZoomIn=!1,c.canZoomOut=!0,c.canDrag=!0,c.draggableNavIsVisible=!0):(c.canZoomIn=!0,c.canZoomOut=!1,c.canDrag=!1,c.draggableNavIsVisible=!1))}),c.$watchGroup(["options.zoomSize","gallery.activeAlbum.activePhoto.width","gallery.activeAlbum.activePhoto.height","preview.clientWidth","preview.clientHeight"],function(){var b,d,e=c.options.zoomSize;c.gallery.activeAlbum.activePhoto?c.gallery.activeAlbum.activePhoto.style||(c.gallery.activeAlbum.activePhoto.style={}):c.gallery.activeAlbum.activePhoto={style:{}},b=c.gallery.activeAlbum.activePhoto,d=b.width/b.height<g.clientWidth/g.clientHeight,"fill"===e?d?a.extend(b.style,{width:100*f.transitionCols+"%",height:"auto","max-width":"none","max-height":"none"}):a.extend(b.style,{width:"auto",height:100*f.transitionRows+"%","max-width":"none","max-height":"none"}):"fit"===e?d?a.extend(b.style,{width:"auto",height:100*f.transitionRows+"%","max-width":100*f.transitionCols+"%","max-height":"none"}):a.extend(b.style,{width:100*f.transitionCols+"%",height:"auto","max-width":"none","max-height":100*f.transitionRows+"%"}):a.extend(b.style,{width:"auto",height:"auto","max-width":"none","max-height":"none"}),a.extend(b.style,{"margin-top":"0","margin-left":"0"})}),c.$watch("thumbnailsIsHidden + thumbnailsIsFullScreen",function(){c.thumbnailsIsHidden&&c.thumbnailsIsFullScreen||b(function(){c.$apply()})})},templateUrl:"../../templates/preview.html"}}]),a.module("jgallery").directive("jgalleryScrollable",["$interval","$window",function(a,b){return{transclude:!0,scope:!0,link:function(c,d,e){var f=b.container=d[0].childNodes[0],g=function(a,b,c){i(a,b,c,"scrollTop")},h=function(a,b,c){i(a,b,c,"scrollLeft")},i=function(b,c,d,e){var f=40,g=b[e],h=d/f,i=(c-g)/h,j=0,k=a(function(){j++,b[e]+=i,j===h&&a.cancel(k)},f)};c.canScrollTop=function(){return f.scrollTop>0},c.scrollTop=function(){c.canScrollTop()&&g(f,f.scrollTop-.7*b.innerHeight,200)},c.canScrollBottom=function(){return f.offsetHeight+f.scrollTop<f.scrollHeight},c.scrollBottom=function(){c.canScrollBottom()&&g(f,f.scrollTop+.7*b.innerHeight,200)},c.canScrollLeft=function(){return f.scrollLeft>0},c.scrollLeft=function(){c.canScrollLeft()&&h(f,f.scrollLeft-.7*b.innerWidth,200)},c.canScrollRight=function(){return f.offsetWidth+f.scrollLeft<f.scrollWidth},c.scrollRight=function(){c.canScrollRight()&&h(f,f.scrollLeft+.7*b.innerWidth,200)}},templateUrl:"../../templates/scrollable.html"}}]),a.module("jgallery").directive("jgalleryThumbnails",function(){return{require:"^jgallery",link:function(a,b,c){a.$watch("options.thumbnailsPosition",function(b){a.thumbnailsIsVertical="left"===b||"right"===b}),a.$watch("options.thumbnailsFullScreen",function(b){b?(a.thumbWidth=a.options.thumbWidthOnFullScreen,a.thumbHeight=a.options.thumbHeightOnFullScreen):(a.thumbWidth=a.options.thumbWidth,a.thumbHeight=a.options.thumbHeight)}),a.thumbnails=b[0],a.thumbnailsFullScreen=!1},templateUrl:"../../templates/thumbnails.html"}})}(angular);